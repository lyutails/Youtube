import{b as U,d as h,f as H,g as J,h as V,j as u,l as K,m as Q,n as W,o as X,p as T,r as Y}from"./chunk-FAALJWNN.js";import{c as tt,d as P,f as A,g as q,h as M}from"./chunk-WXI33M2S.js";import{l as et,t as it}from"./chunk-C5YKYNIU.js";import{n as Z}from"./chunk-KAIEEQQJ.js";import"./chunk-CHYEB5OR.js";import{i as z}from"./chunk-JAX72A3X.js";import{Ab as m,Ba as E,Bb as R,Ca as k,Cb as B,Db as j,Eb as a,Fb as i,Gb as f,Hb as D,Hc as G,Ic as $,Jb as C,Kb as s,N as O,Tb as l,Ub as g,Vb as S,_b as L,bc as b,cc as w,db as n,eb as y,pb as v,ra as N,rc as F,ub as c,wb as x,xb as _}from"./chunk-QMZDZQX7.js";function nt(t,r){if(t&1&&(a(0,"mat-icon",12),l(1),i()),t&2){let e=s();_("color",e.colorRequired()),n(),g(e.requiredSign())}}function ot(t,r){if(t&1&&(a(0,"mat-icon",12),l(1),i()),t&2){let e=s();_("color",e.colorValid()),n(),g(e.validSign())}}function at(t,r){t&1&&(a(0,"div"),l(1,"please enter a title"),i())}function lt(t,r){t&1&&(a(0,"div"),l(1,"* the title is too short"),i())}function rt(t,r){t&1&&(a(0,"div"),l(1,"* the title is too long"),i())}function dt(t,r){if(t&1&&(a(0,"div",6),c(1,at,2,0,"div")(2,lt,2,0,"div")(3,rt,2,0,"div"),i()),t&2){let e,d=s();n(),m((e=d.adminForm.get("title"))!=null&&e.hasError("required")?1:-1),n(),m(d.title!=null&&d.title.hasError("minlength")?2:-1),n(),m(d.title!=null&&d.title.hasError("maxlength")?3:-1)}}function mt(t,r){t&1&&(a(0,"div"),l(1,"* the description is too long"),i())}function st(t,r){if(t&1&&(a(0,"div",6),c(1,mt,2,0,"div"),i()),t&2){let e=s();n(),m(e.description!=null&&e.description.hasError("maxlength")?1:-1)}}function ct(t,r){if(t&1&&(a(0,"mat-icon",12),l(1),i()),t&2){let e=s();_("color",e.colorRequired()),n(),g(e.requiredSign())}}function pt(t,r){if(t&1&&(a(0,"mat-icon",12),l(1),i()),t&2){let e=s();_("color",e.colorValid()),n(),g(e.validSign())}}function ut(t,r){t&1&&(a(0,"div"),l(1,"please enter an img"),i())}function _t(t,r){if(t&1&&(a(0,"div",6),c(1,ut,2,0,"div"),i()),t&2){let e=s();n(),m(e.img!=null&&e.img.hasError("required")?1:-1)}}function gt(t,r){t&1&&(a(0,"div"),l(1,"please enter a link video"),i())}function ht(t,r){t&1&&(a(0,"div"),l(1,"* the link is too short"),i())}function vt(t,r){if(t&1&&(a(0,"div",6),c(1,gt,2,0,"div")(2,ht,2,0,"div"),i()),t&2){let e=s();n(),m(e.linkVideo!=null&&e.linkVideo.hasError("required")?1:-1),n(),m(e.linkVideo!=null&&e.linkVideo.hasError("minlength")?2:-1)}}function ft(t,r){if(t&1&&(a(0,"mat-icon",12),l(1),i()),t&2){let e=s(2);_("color",e.colorRequired()),n(),g(e.requiredSign())}}function xt(t,r){if(t&1&&(a(0,"mat-icon",12),l(1),i()),t&2){let e=s(2);_("color",e.colorValid()),n(),g(e.validSign())}}function Ct(t,r){t&1&&(a(0,"div"),l(1,"please enter a tag"),i())}function St(t,r){if(t&1&&(a(0,"div",6),c(1,Ct,2,0,"div"),i()),t&2){let e=s().$implicit;n(),m(e!=null&&e.hasError("required")?1:-1)}}function bt(t,r){if(t&1){let e=D();a(0,"div",15)(1,"div",21)(2,"label",22),l(3,"Tag "),c(4,ft,2,3,"mat-icon",4)(5,xt,2,3,"mat-icon",4),i(),f(6,"input",23),a(7,"button",24),C("click",function(){E(e);let p=s();return k(p.addTag())}),l(8),b(9,"uppercase"),i(),a(10,"button",24),C("click",function(){E(e);let p=s();return k(p.removeTag())}),l(11),b(12,"uppercase"),i()(),c(13,St,2,1,"div",6),i()}if(t&2){let e=r.$implicit,d=r.$index,p=s();n(4),m(e!=null&&e.invalid?4:5),n(2),x("formControlName",d),n(2),S(" ",w(9,5,p.addButtonName)," "),n(3),S(" ",w(12,7,p.deleteButtonName)," "),n(2),m(e.invalid&&e.touched?13:-1)}}var Ot=(()=>{let r=class r{constructor(d,p){this.router=d,this.store=p,this.submitButtonName="Submit",this.resetButtonName="Reset",this.deleteButtonName="delete",this.addButtonName="add",this.initialValue="",this.requiredSignColor="oklch(59.98% 0.236 15.45)",this.validSignColor="oklch(59.92% 0.255 298.77)",this.colorRequired=v(this.requiredSignColor),this.colorValid=v(this.validSignColor),this.validSign=v("verified_user"),this.requiredSign=v("lock"),this.isValid=v(!1),this.validationSign=v("lock"),this.isReset=v(!1),this.adminForm=new V({title:new u(""),description:new u(""),img:new u(""),linkVideo:new u(""),tags:new T([new u])}),this.color=F(()=>this.isValid()?this.colorValid():this.colorRequired()),this.colorReset=F(()=>this.isReset()?"oklch(60.59% 0.273 332.27)":"oklch(52.17% 0.281 296.83)")}ngOnInit(){this.adminForm=new V({title:new u("",[h.required,h.minLength(3),h.maxLength(20)]),description:new u("",[h.maxLength(255)]),img:new u("",[h.required]),linkVideo:new u("",[h.required,h.minLength(4)]),tags:new T([new u("",h.required)])}),this.adminForm.get("linkVideo")?.statusChanges.pipe(O()).subscribe(d=>{d==="INVALID"?(this.isValid.set(!1),this.validationSign.set("lock")):(this.isValid.set(!0),this.validationSign.set("verified_user"))})}onSubmit(){this.adminForm.value.title?.trim()&&this.adminForm.value.img?.trim()&&this.adminForm.value.linkVideo?.trim()&&this.adminForm.controls.tags.valid&&this.adminForm.valid&&(this.store.dispatch(it.createCard({item:{customId:this.createCustomId(),title:this.adminForm.value.title,description:this.adminForm.value.description,img:this.adminForm.value.img,linkVideo:this.adminForm.value.linkVideo,tags:this.adminForm.value.tags,date:new Date().toString()}})),this.adminForm.reset(),this.tags.clear(),this.addTag())}createCustomId(){return this.customId=Math.random().toString(36).substring(2),this.customId}get title(){return this.adminForm.get("title")}get description(){return this.adminForm.get("description")}get img(){return this.adminForm.get("img")}get linkVideo(){return this.adminForm.get("linkVideo")}get tags(){let{tags:d}=this.adminForm.controls;return d}addTag(){if(this.tags.length<=4){let d=new u("",h.required);return this.tags.push(d)}return this.tags}removeTag(){return this.tags.length>1?this.tags.removeAt(this.index):this.tags}reset(){this.adminForm.reset(),this.tags.clear(),this.addTag()}toggleReset(){this.isReset.update(d=>!d)}};r.\u0275fac=function(p){return new(p||r)(y(z),y(et))},r.\u0275cmp=N({type:r,selectors:[["app-admin"]],standalone:!0,features:[L],decls:46,vars:26,consts:[[1,"admin"],[1,"admin_form",3,"ngSubmit","formGroup"],[1,"admin_item"],["for","title",1,"admin_label"],[1,"required_sign",3,"color"],["id","title","type","text","formControlName","title","placeholder","title...",1,"admin_input"],[1,"alert","alert-danger"],["for","description",1,"admin_label"],["id","description","type","text","formControlName","description","placeholder","description...",1,"admin_input"],["for","img",1,"admin_label"],["id","img","type","text","formControlName","img","placeholder","image...",1,"admin_input"],["for","link",1,"admin_label"],[1,"required_sign"],["id","link","type","text","formControlName","linkVideo","placeholder","link video...",1,"admin_input"],["formArrayName","tags",1,"tags_wrapper"],[1,"tags"],[1,"required"],[1,"passed"],[1,"passed_sign"],["type","reset",1,"admin_button","reset",3,"click"],["type","submit",1,"admin_button","submit",3,"disabled"],[1,"admin_item","tag"],["for","tag",1,"admin_label"],["id","tag","type","text","placeholder","tag...",1,"admin_input",3,"formControlName"],["type","button",1,"admin_button","tag",3,"click"]],template:function(p,o){p&1&&(a(0,"div",0),l(1," Create new card "),a(2,"form",1),C("ngSubmit",function(){return o.onSubmit()}),a(3,"div",2)(4,"label",3),l(5,"Title "),c(6,nt,2,3,"mat-icon",4)(7,ot,2,3,"mat-icon",4),i(),f(8,"input",5),i(),c(9,dt,4,3,"div",6),a(10,"div",2)(11,"label",7),l(12,"Description"),i(),f(13,"input",8),i(),c(14,st,2,1,"div",6),a(15,"div",2)(16,"label",9),l(17,"Image "),c(18,ct,2,3,"mat-icon",4)(19,pt,2,3,"mat-icon",4),i(),f(20,"input",10),i(),c(21,_t,2,1,"div",6),a(22,"div",2)(23,"label",11),l(24,"Link video "),a(25,"mat-icon",12),l(26),i()(),f(27,"input",13),i(),c(28,vt,3,2,"div",6),a(29,"div",14),B(30,bt,14,9,"div",15,R),i(),a(32,"div",16)(33,"mat-icon",12),l(34),i(),l(35," required "),i(),a(36,"div",17)(37,"mat-icon",18),l(38),i(),l(39," passed "),i(),a(40,"button",19),C("click",function(){return o.reset()})("click",function(){return o.toggleReset()}),l(41),b(42,"uppercase"),i(),a(43,"button",20),l(44),b(45,"uppercase"),i()()()),p&2&&(n(2),x("formGroup",o.adminForm),n(4),m(o.title!=null&&o.title.invalid?6:7),n(3),m(o.title!=null&&o.title.invalid&&(o.title!=null&&o.title.touched)?9:-1),n(5),m(o.description!=null&&o.description.invalid&&(o.description!=null&&o.description.touched)?14:-1),n(4),m(o.img!=null&&o.img.invalid?18:19),n(3),m(o.img!=null&&o.img.invalid&&(o.img!=null&&o.img.touched)?21:-1),n(4),_("color",o.color()),n(),g(o.validationSign()),n(2),m(o.linkVideo!=null&&o.linkVideo.invalid&&(o.linkVideo!=null&&o.linkVideo.touched)?28:-1),n(2),j(o.tags.controls),n(3),_("color",o.colorRequired()),n(),g(o.requiredSign()),n(3),_("color",o.colorValid()),n(),g(o.validSign()),n(2),_("color",o.colorReset()),x("@changeResetButtonColour",o.isReset()?"initial":"coloured"),n(),S(" ",w(42,22,o.resetButtonName)," "),n(2),x("disabled",!o.adminForm.valid),n(),S(" ",w(45,24,o.submitButtonName)," "))},dependencies:[Y,K,U,H,J,Q,X,W,G,$,Z],styles:[".admin[_ngcontent-%COMP%]{width:90vw;margin:0 auto;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;flex:1 0 auto;flex-wrap:wrap;padding:20px 0}.admin_form[_ngcontent-%COMP%]{width:40%;margin:0 auto;display:flex;flex-direction:column;align-items:center;justify-content:center;border:1px solid oklch(0% 0 0/50);padding:10px 20px;border-radius:10px}.admin_text[_ngcontent-%COMP%]{font-size:2rem;text-align:center}.admin_item[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.admin_item.tag[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin:10px auto}.admin_input[_ngcontent-%COMP%]{outline:none}.admin_input[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.admin_label[_ngcontent-%COMP%]{pointer-events:none}.admin_button[_ngcontent-%COMP%]{padding:5px 10px;margin-top:20px}.admin_button[_ngcontent-%COMP%]:hover{cursor:pointer}.admin_button.tag[_ngcontent-%COMP%]{margin-top:0}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid oklch(59.98% .236 15.45)}.alert.alert-danger[_ngcontent-%COMP%]{color:#eb0d4f}.tags_wrapper[_ngcontent-%COMP%]{width:100%;margin:0 auto;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative}.tags[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;margin:10px auto}.required[_ngcontent-%COMP%], .passed[_ngcontent-%COMP%]{width:80%;display:flex;align-items:flex-start}.required_sign[_ngcontent-%COMP%], .passed_sign[_ngcontent-%COMP%]{font-size:1rem;width:20px;height:20px;text-align:center}@media screen and (min-width: 320px) and (max-width: 499.99px){.admin_form[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width: 500px) and (max-width: 999.99px){.admin_form[_ngcontent-%COMP%]{width:50%}}@media screen and (min-width: 320px) and (max-width: 999.99px){.admin_item[_ngcontent-%COMP%]{flex-direction:column}}"],data:{animation:[tt("changeResetButtonColour",[q("initial",A({backgroundColor:"transparent",border:"1px solid"})),q("coloured",A({backgroundColor:"#ff79e9",border:"1px solid"})),M("initial => coloured",[P("0.2s")]),M("coloured => initial",[P("0.2s")])])]}});let t=r;return t})();export{Ot as AdminComponent};
